cluster_name: golem-cluster

min_workers: 3
max_workers: 10
idle_timeout_minutes: 5

provider:
  type: "external"
  use_internal_ips: true
  module: "golem_ray.client.node_provider.GolemNodeProvider"
  parameters:
    golem_ray_url: "http://localhost:8080"
    image_hash: "0ce63e86c7c7afeee38c2a7282e0f778089eea727d7bc65c82549976"
    network: "goerli"
    budget: 10

file_mounts:
  {
      "/tmp/golem": "/tmp/golem"
  }

available_node_types:
  ray.head.default:
    max_workers: 1
    resources: {"CPU": 1}
    node_config:
      kind: Node
  ray.worker.default:
    min_workers: 3
    max_workers: 10
    resources: {"CPU": 3}
    node_config:
      kind: Node

initialization_commands: ["pip install pandas"]
setup_commands: []

head_setup_commands: []
worker_setup_commands: []

head_start_ray_commands: [
  "ray start --head --node-ip-address  --dashboard-port 0.0.0.0 --dashboard-port 8266 --autoscaling-config=~/ray_bootstrap_config.yaml"
]
worker_start_ray_commands: [
  "ray start --dashboard-port 8266 --autoscaling-config=~/ray_bootstrap_config.yaml",
  "touch /tmp/dupa.txt",
]
auth:
  ssh_user: 'test'
  ssh_private_key: '/home/filip/.ssh/id_rsa.pub'

cluster_synced_files: []
